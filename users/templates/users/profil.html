{% extends "base.html" %}
{% load static %}

{% block title %}Mon Profil - FiqhApp{% endblock %}

{% block content %}
<!-- En-tête du profil -->
<header class="profile-header">
    <div class="container text-center">
        <img src="https://ui-avatars.com/api/?name={{ user.first_name|default:'Utilisateur' }}+{{ user.last_name|default:'FiqhApp' }}&background=ffffff&color=1a936f&size=200" 
             alt="Avatar" class="profile-avatar mb-3">
        <h1 class="h3">{{ user.first_name|default:"Utilisateur" }} {{ user.last_name|default:"" }}</h1>
        <p class="mb-0">Compte vérifié • Membre depuis {{ user.date_joined|date:"F Y" }}</p>
    </div>
</header>

<!-- Contenu principal -->
<main class="container profile-container">
    <!-- Informations personnelles -->
    <div class="profile-card">
        <h3 class="profile-section-title"><i class="fas fa-user"></i> Informations personnelles</h3>
        
        <form method="post" action="#">
            {% csrf_token %}
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="firstName" class="form-label">Prénom</label>
                    <input type="text" class="form-control" id="firstName" name="first_name" 
                           value="{{ user.first_name|default:'' }}">
                </div>
                <div class="col-md-6">
                    <label for="lastName" class="form-label">Nom</label>
                    <input type="text" class="form-control" id="lastName" name="last_name" 
                           value="{{ user.last_name|default:'' }}">
                </div>
            </div>
            
            <div class="mb-3">
                <label for="email" class="form-label">Adresse email</label>
                <input type="email" class="form-control" id="email" name="email" 
                       value="{{ user.email|default:'' }}">
            </div>
            
            <div class="mb-3">
                <label for="phone" class="form-label">Téléphone (optionnel)</label>
                <input type="tel" class="form-control" id="phone" name="phone" 
                       value="{{ user_profile.phone|default:'' }}">
            </div>
            
            <div class="mb-3">
                <label for="bio" class="form-label">Bio (optionnel)</label>
                <textarea class="form-control" id="bio" name="bio" rows="3">{{ user_profile.bio|default:'' }}</textarea>
            </div>
            
            <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
        </form>
    </div>
    
    <!-- Paramètres du compte -->
    <div class="profile-card">
        <h3 class="profile-section-title"><i class="fas fa-cog"></i> Paramètres du compte</h3>
        
        <form method="post" action="#">
            {% csrf_token %}
            <div class="mb-4">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notifications" name="email_notifications" 
                           {% if user_settings.email_notifications %}checked{% endif %}>
                    <label class="form-check-label" for="notifications">Notifications par email</label>
                </div>
                <small class="text-muted">Recevez des notifications concernant vos cours et les nouvelles leçons.</small>
            </div>
            
            <div class="mb-4">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="newsletter" name="newsletter" 
                           {% if user_settings.newsletter %}checked{% endif %}>
                    <label class="form-check-label" for="newsletter">Newsletter</label>
                </div>
                <small class="text-muted">Recevez notre newsletter mensuelle avec des conseils et nouvelles ressources.</small>
            </div>
            
            <button type="submit" class="btn btn-primary">Enregistrer les préférences</button>
        </form>
        
        <div class="mt-4 pt-3 border-top">
            <h5>Changer le mot de passe</h5>
            <form method="post" action="#">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="currentPassword" class="form-label">Mot de passe actuel</label>
                            <input type="password" class="form-control" id="currentPassword" name="current_password" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Nouveau mot de passe</label>
                            <input type="password" class="form-control" id="newPassword" name="new_password" required>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-outline-primary">Mettre à jour le mot de passe</button>
            </form>
        </div>
    </div>
    
    <!-- FAQ -->
    <div class="profile-card">
        <h3 class="profile-section-title"><i class="fas fa-question-circle"></i> Foire aux questions</h3>
        
        <div class="faq-item">
            <div class="faq-question" data-faq="1">
                Comment modifier mes informations personnelles ?
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer" id="faq-1">
                Vous pouvez modifier vos informations personnelles dans la section "Informations personnelles" ci-dessus. Après avoir effectué vos modifications, cliquez sur le bouton "Enregistrer les modifications".
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" data-faq="2">
                Comment désactiver les notifications ?
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer" id="faq-2">
                Allez dans la section "Paramètres du compte" et désactivez l'interrupteur à côté de "Notifications par email".
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" data-faq="3">
                Comment supprimer mon compte ?
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer" id="faq-3">
                Pour supprimer votre compte, contactez notre support à support@fiqhapp.com. Notez que cette action est irréversible.
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" data-faq="4">
                Qui contacter en cas de problème ?
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer" id="faq-4">
                Vous pouvez contacter notre équipe de support à support@fiqhapp.com ou via le formulaire de contact dans l'application. Nous répondons généralement dans les 24 heures.
            </div>
        </div>
    </div>
    
    <!-- Zone de déconnexion -->
    <div class="profile-card">
        <h3 class="profile-section-title"><i class="fas fa-sign-out-alt"></i> Déconnexion</h3>
        
        <div class="d-grid gap-2">
            <a href="#" class="btn btn-outline-primary">
                <i class="fas fa-sign-out-alt me-2"></i> Se déconnecter
            </a>
        </div>
        
        <div class="danger-zone mt-4">
            <h5 class="text-danger"><i class="fas fa-exclamation-triangle me-2"></i>Zone de danger</h5>
            <p class="small text-muted">La suppression de votre compte est une action irréversible. Toutes vos données seront définitivement perdues.</p>
            <button class="btn btn-outline-danger btn-sm" id="deleteAccountBtn">
                <i class="fas fa-trash-alt me-1"></i> Demander la suppression du compte
            </button>
        </div>
    </div>
</main>
{% endblock %}