{% extends "base.html" %}

{% load static %}
{% block content %}
 <div class="container">
        <!-- Section Spéciale -->
        <section class="special-section">
    <div class="section-header">
        <h2 class="section-title">#SpecialForYou</h2>
        <a href="#" class="see-all">See All</a>
    </div>
    
    <div class="horizontal-scroll">
        {% for offer in offers %}
        <div class="special-card" {% if offer.background %}style="background: {{ offer.background }};"{% endif %}>
            <div class="special-card-content">
                <div>
                    {% if offer.badge %}
                    <span class="special-badge">{{ offer.badge }}</span>
                    {% endif %}
                    <h3 class="special-title">{{ offer.title }}</h3>
                    {% if offer.description %}
                    <p class="special-desc">{{ offer.description }}</p>
                    {% endif %}
                </div>
                {% if offer.offer_text %}
                <div class="special-offer">{{ offer.offer_text }}</div>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <!-- Fallback si aucune offre n'existe -->
        <div class="special-card">
            <div class="special-card-content">
                <div>
                    <span class="special-badge">Limited time!</span>
                    <h3 class="special-title">Get Special Offer</h3>
                    <p class="special-desc">55+ Screens with all services available</p>
                </div>
                <div class="special-offer">T&C Applied</div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="scroll-indicator">
        {% for offer in special_offers %}
        <span class="dot {% if forloop.first %}active{% endif %}"></span>
        {% empty %}
        <span class="dot active"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        {% endfor %}
    </div>
        </section>

        <!-- Catégories -->
        <section class="special-section">
    <div class="section-header">
        <h2 class="section-title">Category</h2>
        <a href="#" class="see-all">See All</a>
    </div>
    
    <div class="horizontal-scroll">
        {% for category in categories %}
            <a href="{% url 'category_detail' category.pk %}" class="category-card">
                <div class="category-icon" style="background-color: {{ category.color }};">
                    <i class="{{ category.icon }}"></i>
                </div>
                <div class="category-name">
                    {{ category.name }}<br>
                </div>
            </a>
        {% endfor %}
    </div>
</section>

        <!-- Cours Populaires -->
<section class="special-section">
    <div class="section-header">
        <h2 class="section-title">Popular Courses</h2>
        <a href="#" class="see-all">See All</a>
    </div>
    
    <div class="horizontal-scroll">
        {% for course in popular_courses %}
            <div class="course-card">
                <a href="#">
                    <div class="course-image">
                        {% if course.image %}
                            <img src="{{ course.image.url }}" alt="{{ course.title }}">
                        {% else %}
                            <img src="{{ course.thumbnail_url }}" alt="{{ course.title }}">
                        {% endif %}
                        <span class="course-duration">{{ course.duration }}</span>
                    </div>
                    <div class="course-content">
                        <h3 class="course-title">{{ course.title }}</h3>
                        <div class="course-info">
                            <span class="course-category">{{ course.category.name }}</span>
                            <span><i class="far fa-eye"></i> {{ course.views }}</span>
                        </div>
                    </div>
                </a>
            </div>
        {% endfor %}
    </div>
</section>


        <!-- Cours Récents -->
         <section>
            <div class="section-header">
                <h2 class="section-title">Cours recent</h2>
                <a href="#" class="see-all">See All</a>
            </div>
       <div class="horizontal-scroll">
    {% for course in recent_courses %}
        <div class="course-card">
            <div class="course-image">
                {% if course.image %}
                    <img src="{{ course.image.url }}" alt="{{ course.title }}">
                {% else %}
                    <img src="{{ course.thumbnail_url }}" alt="{{ course.title }}">
                {% endif %}
                <span class="course-duration">{{ course.duration }}</span>
            </div>
            <div class="course-content">
                <h3 class="course-title">{{ course.title }}</h3>
                <div class="course-info">
                    <span class="course-category">{{ course.category.name }}</span>
                    <span><i class="far fa-clock"></i> {{ course.created_at|timesince }}</span>
                </div>
            </div>
        </div>
    {% endfor %}
    </div>
        </section>

    </div>
{% endblock %}